<!DOCTYPE html>
<html lang="vi">
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSKH Professional System v2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .chat-gradient { background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%); }
        .active-user { background-color: #334155 !important; border-left: 4px solid #38bdf8; }
        .status-dot { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <aside class="w-80 bg-slate-900 border-r border-slate-700 flex flex-col">
        <div class="p-4 border-b border-slate-700">
            <h1 class="text-xl font-bold text-sky-400"><i class="fa-solid fa-bolt-lightning mr-2"></i>CSKH AI PRO</h1>
            <input type="text" placeholder="Tìm kiếm khách hàng..." class="w-full mt-3 bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-sky-500 text-white">
        </div>

        <div class="flex-1 overflow-y-auto custom-scrollbar">
            <div class="p-3 uppercase text-xs font-bold text-slate-500 tracking-wider">Khách mới chưa rep (3)</div>
            <div class="user-item active-user p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-800 transition">
                <div class="relative">
                    <img src="https://i.pravatar.cc/150?u=1" class="w-11 h-11 rounded-full border-2 border-sky-500">
                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-sky-500 border-2 border-slate-900 rounded-full status-dot"></span>
                </div>
                <div class="flex-1">
                    <div class="flex justify-between"><span class="font-semibold text-sm">Anh Tuấn (New)</span><span class="text-[10px] text-sky-400">Vừa xong</span></div>
                    <p class="text-xs text-slate-400 truncate">Hỗ trợ mình nạp tiền với shop...</p>
                </div>
            </div>

            <div class="p-3 uppercase text-xs font-bold text-slate-500 tracking-wider mt-4">Khách cũ / VIP</div>
            <div class="user-item p-4 flex items-center gap-3 cursor-pointer hover:bg-slate-800 transition">
                <img src="https://i.pravatar.cc/150?u=2" class="w-11 h-11 rounded-full opacity-70">
                <div class="flex-1">
                    <div class="flex justify-between"><span class="font-semibold text-sm">Chị Lan VVIP</span><span class="text-[10px] text-slate-500">2 giờ trước</span></div>
                    <p class="text-xs text-slate-500 truncate">Đã nhận được khuyến mãi chưa em?</p>
                </div>
                <span class="bg-amber-500/20 text-amber-500 text-[9px] px-2 py-1 rounded">VIP</span>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col chat-gradient">
        <header class="p-4 bg-slate-800/50 backdrop-blur-md border-b border-slate-700 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <h2 class="font-bold text-lg text-white">Anh Tuấn (New)</h2>
                <span class="px-2 py-0.5 bg-sky-500/20 text-sky-400 text-[10px] rounded uppercase font-bold tracking-widest">Đang trực tuyến</span>
            </div>
            <div class="flex gap-4 text-slate-400">
                <i class="fa-solid fa-phone cursor-pointer hover:text-white"></i>
                <i class="fa-solid fa-video cursor-pointer hover:text-white"></i>
                <i class="fa-solid fa-ellipsis-vertical cursor-pointer hover:text-white"></i>
            </div>
        </header>

        <div id="chatBox" class="flex-1 p-6 overflow-y-auto custom-scrollbar flex flex-col gap-4">
            <div class="bg-slate-800 p-3 rounded-2xl rounded-tl-none max-w-[60%] self-start shadow-lg">
                <p class="text-sm">Chào Admin, mình vừa chuyển khoản 2tr mà chưa thấy cộng điểm. Check giúp mình với!</p>
                <span class="text-[9px] text-slate-500 mt-1 block text-right">14:02 PM</span>
            </div>
            <div class="bg-sky-600 p-3 rounded-2xl rounded-tr-none max-w-[60%] self-end shadow-lg text-white">
                <p class="text-sm">Dạ chào anh Tuấn, anh vui lòng đợi trong giây lát em đang kiểm tra lệnh nạp của anh ạ.</p>
                <span class="text-[9px] text-sky-200 mt-1 block text-right">14:05 PM</span>
            </div>
        </div>

        <div class="p-4 bg-slate-800/80 border-t border-slate-700 flex items-center gap-3">
            <button class="text-slate-400 hover:text-sky-400"><i class="fa-solid fa-circle-plus text-xl"></i></button>
            <input id="userInput" type="text" placeholder="Viết tin nhắn phản hồi..." class="flex-1 bg-slate-700 border-none rounded-full px-5 py-3 text-sm focus:ring-2 focus:ring-sky-500 focus:outline-none text-white">
            <button onclick="sendMessage()" class="bg-sky-500 hover:bg-sky-600 p-3 rounded-full transition shadow-lg shadow-sky-500/20">
                <i class="fa-solid fa-paper-plane text-white"></i>
            </button>
        </div>
    </main>

    <aside class="w-80 bg-slate-900 border-l border-slate-700 p-5 overflow-y-auto custom-scrollbar">
        <h3 class="text-sm font-bold text-white mb-4 uppercase tracking-tighter border-b border-slate-700 pb-2">Hệ thống gửi tin tự động</h3>
        
        <div class="space-y-6">
            <div>
                <label class="text-[11px] text-slate-400 font-bold uppercase mb-2 block">1. Đối tượng mục tiêu</label>
                <select id="targetGroup" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-sm text-white focus:ring-1 focus:ring-sky-500 outline-none">
                    <option value="all_new">Toàn bộ khách mới (Chưa rep)</option>
                    <option value="vip">Danh sách VVIP (Đã nạp)</option>
                    <option value="all">Tất cả khách hàng</option>
                </select>
            </div>

            <div>
                <label class="text-[11px] text-slate-400 font-bold uppercase mb-2 block">2. Nội dung chiến dịch</label>
                <textarea id="spamMsg" rows="4" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-sm text-white focus:ring-1 focus:ring-sky-500 outline-none mb-3" placeholder="Ví dụ: Chúc mừng anh/chị nhận được code 50k..."></textarea>
                <div class="border-2 border-dashed border-slate-700 rounded-lg p-4 text-center hover:border-sky-500 transition cursor-pointer group">
                    <i class="fa-regular fa-image text-slate-500 group-hover:text-sky-500 mb-2"></i>
                    <p class="text-[10px] text-slate-500 group-hover:text-sky-400">Tải ảnh lên hoặc dán URL ảnh</p>
                </div>
            </div>

            <button onclick="runSpam()" class="w-full bg-gradient-to-r from-sky-600 to-blue-700 hover:from-sky-500 hover:to-blue-600 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-500/20 transition-all flex items-center justify-center gap-2">
                <i class="fa-solid fa-rocket"></i> BẮT ĐẦU CHIẾN DỊCH
            </button>

            <div id="progressArea" class="hidden animate-fade-in">
                <div class="flex justify-between text-[10px] mb-1">
                    <span id="progressText">Đang gửi: 0/100</span>
                    <span class="text-sky-400">Đang chạy...</span>
                </div>
                <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                    <div id="progressBar" class="bg-sky-500 h-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="mt-8 border-t border-slate-700 pt-6">
            <h3 class="text-sm font-bold text-white mb-4 uppercase tracking-tighter">Tính năng Auto-Bot</h3>
            <div class="flex items-center justify-between p-3 bg-slate-800 rounded-lg">
                <span class="text-xs">Tự rep theo từ khóa</span>
                <div class="w-10 h-5 bg-sky-500 rounded-full relative"><div class="absolute right-1 top-1 w-3 h-3 bg-white rounded-full"></div></div>
            </div>
        </div>
    </aside>

    <script>
        function sendMessage() {
            const input = document.getElementById('userInput');
            const chatBox = document.getElementById('chatBox');
            if(input.value.trim() !== "") {
                const msgHtml = `<div class="bg-sky-600 p-3 rounded-2xl rounded-tr-none max-w-[60%] self-end shadow-lg text-white animate-fade-in">
                                    <p class="text-sm">${input.value}</p>
                                    <span class="text-[9px] text-sky-200 mt-1 block text-right">Bây giờ</span>
                                 </div>`;
                chatBox.insertAdjacentHTML('beforeend', msgHtml);
                input.value = "";
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }

        function runSpam() {
            const group = document.getElementById('targetGroup').value;
            const progressArea = document.getElementById('progressArea');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressArea.classList.remove('hidden');
            let count = 0;
            const total = 50;

            const interval = setInterval(() => {
                count += 5;
                let percent = (count / total) * 100;
                progressBar.style.width = percent + "%";
                progressText.innerText = `Đang gửi cho nhóm [${group}]: ${count}/${total}`;

                if(count >= total) {
                    clearInterval(interval);
                    alert("✅ CHIẾN DỊCH HOÀN TẤT!\nĐã gửi nội dung thành công cho toàn bộ đối tượng chọn lọc.");
                    progressArea.classList.add('hidden');
                    progressBar.style.width = "0%";
                }
            }, 300);
        }
    </script>
</body>
</html>